<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="Operating System - https://Tryanel.github.io/operating-system/">
    <meta name="author" content="SantonLee - https://Tryanel.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>Operating System</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/lxgw-wenkai-webfont/1.7.0/style.min.css" />
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" />
    
    <link rel="stylesheet" href="https://Tryanel.github.io/style.min.6bbccf0916939df698171c34d30f896276712c30bd56be0d7fd8023e1b00c3d9.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate ">
        <div class="cool-before" style=""></div>
        <div id="header" class=""><div class="container-header">
    
    
    <div class="right">
        
        <h1 class="title">Operating System</h1>
    
        
            
            <div id="toc">📜</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z" p-id="7410" fill="#adb5bd"></path></svg>
            2023-12-09&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z" p-id="23839" fill="#adb5bd"></path></svg>
            2023-12-16&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z" fill="#adb5bd" p-id="33867"></path><path d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z" fill="#adb5bd" p-id="33868"></path></svg>
            10868 字</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"></path><path d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"></path></svg>
            22 分钟</span>
            <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/cs">CS</a>
			
		</div>
	</div>
</div>
        
    </div>
    
    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#第一章-操作系统引论">第一章 操作系统引论</a></li>
    <li><a href="#11-操作系统概念">1.1 操作系统概念</a>
      <ul>
        <li><a href="#111-计算机硬件结构">1.1.1 计算机硬件结构</a></li>
        <li><a href="#112-什么是操作系统">1.1.2 什么是操作系统</a></li>
        <li><a href="#113-操作系统的地位">1.1.3 操作系统的地位</a></li>
      </ul>
    </li>
    <li><a href="#12-操作系统的主要功能">1.2 操作系统的主要功能</a></li>
    <li><a href="#13-操作系统的特征和服务">1.3 操作系统的特征和服务</a>
      <ul>
        <li><a href="#并发性">并发性</a></li>
        <li><a href="#共享性">共享性</a></li>
        <li><a href="#异步性">异步性</a></li>
        <li><a href="#抽象性虚拟性">抽象性（虚拟性）</a></li>
        <li><a href="#操作系统提供的服务和方式">操作系统提供的服务和方式</a></li>
      </ul>
    </li>
    <li><a href="#14-操作系统的形成和基本类型">1.4 操作系统的形成和基本类型</a>
      <ul>
        <li><a href="#141-操作系统的形成和发展">1.4.1 操作系统的形成和发展</a></li>
        <li><a href="#142-操作系统的基本类型">1.4.2 操作系统的基本类型</a></li>
      </ul>
    </li>
    <li><a href="#15-系统初始一般过程">1.5 系统初始一般过程</a></li>
    <li><a href="#第二章-进程和线程">第二章 进程和线程</a></li>
    <li><a href="#21-进程概念">2.1 进程概念</a>
      <ul>
        <li><a href="#211-多道程序设计">2.1.1 多道程序设计</a></li>
        <li><a href="#212-进程概念">2.1.2 进程概念</a></li>
      </ul>
    </li>
    <li><a href="#22-进程的状态和组成">2.2 进程的状态和组成</a>
      <ul>
        <li><a href="#221-进程的状态及其转换">2.2.1 进程的状态及其转换</a></li>
        <li><a href="#222-进程描述">2.2.2 进程描述</a></li>
        <li><a href="#223-进程队列">2.2.3 进程队列</a></li>
      </ul>
    </li>
    <li><a href="#23-进程管理">2.3 进程管理</a>
      <ul>
        <li><a href="#231-进程图">2.3.1 进程图</a></li>
        <li><a href="#232-进程创建">2.3.2 进程创建</a></li>
        <li><a href="#233-进程终止">2.3.3 进程终止</a></li>
        <li><a href="#234-进程阻塞">2.3.4 进程阻塞</a></li>
        <li><a href="#235-进程唤醒">2.3.5 进程唤醒</a></li>
      </ul>
    </li>
    <li><a href="#第六章-文件系统">第六章 文件系统</a></li>
    <li><a href="#操作系统往年试卷">操作系统往年试卷</a>
      <ul>
        <li><a href="#一单项选择题">一、单项选择题</a></li>
        <li><a href="#二判断题">二、判断题</a></li>
        <li><a href="#三简答题">三、简答题</a></li>
        <li><a href="#四综合题">四、综合题</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <h2 id="第一章-操作系统引论">第一章 操作系统引论</h2>
<h2 id="11-操作系统概念">1.1 操作系统概念</h2>
<p>计算机系统是有硬件和软件组成的</p>
<ul>
<li>硬件是指计算机物理装置本身。是软件建立与活动的基础；</li>
<li>软件是计算机执行的程序。是对硬件进行管理和功能扩充。</li>
</ul>
<h3 id="111-计算机硬件结构">1.1.1 计算机硬件结构</h3>
<img src="./imgs/image-20231210131514569.png" alt="image-20231210131514569" style="zoom:50%;" />
<ul>
<li>
<p>指令是控制计算机执行某种操作（如加、减、传送、转移等）的命令。</p>
</li>
<li>
<p>特权指令是一类具有特殊权限的指令，只用于操作系统或其他系统软件，普通用户不能直接使用。</p>
</li>
<li>
<p>非特权指令也称为用户指令或普通指令，是普通用户能够直接使用的指令。这是指令集中除特权指令外的所有指令。</p>
</li>
<li>
<p>CPU 的两种运行模式：</p>
<ul>
<li>
<p>内核态（又称核心态、系统态、管态）：</p>
<blockquote>
<p>处理机执行操作系统程序时，有较高特权</p>
</blockquote>
</li>
<li>
<p>用户态（又称目态）：</p>
<blockquote>
<p>处理机执行用户程序时</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>两种运行模式（执行状态）可以相互转换</p>
</li>
</ul>
<h3 id="112-什么是操作系统">1.1.2 什么是操作系统</h3>
<ul>
<li>
<p>操作系统是控制和管理计算机系统内各种硬件和软件资源、有效地组织多道程序运行的系统软件（或程序集合），是用户与计算机之间的接口。</p>
<ol>
<li>操作系统是软件，而且是<code>系统</code>软件</li>
<li>它的基本职能是<code>控制和管理</code>系统内各种资源，有效地<code>组织</code>多道程序的运行</li>
<li>它<code>提供众多服务</code>，方便用户使用，<code>扩充</code>硬件功能</li>
</ol>
</li>
<li>
<p>操作系统作为扩展机器通常把裸机之上覆盖各种软件，从而形成功能更强的机器称为<code>扩展机器</code>或<code>虚拟机</code></p>
</li>
<li>
<p>操作系统作为<code>资源管理器</code></p>
<ol>
<li>监视各种资源，随时记录它们的状态</li>
<li>实施某种策略以决定谁获得资源，何时获得，获得多少</li>
<li>分配资源供需求者使用</li>
<li>回收资源，以便再分配</li>
</ol>
</li>
</ul>
<h3 id="113-操作系统的地位">1.1.3 操作系统的地位</h3>
<img src="./imgs/image-20231210135132862.png" alt="image-20231210135132862" style="zoom:50%;" />
<p>注：软件通常可分为三大类：</p>
<ul>
<li>系统软件——对计算机系统的资源进行控制、管理，并为用户的使用和其他程序的运行提供服务</li>
<li>应用软件——是为解决某一类应用需要或某个特定问题而设计的程序</li>
<li>支撑软件——是辅助软件技术人员从事软件开发工作的软件</li>
</ul>
<h2 id="12-操作系统的主要功能">1.2 操作系统的主要功能</h2>
<p>从资源管理观点看，操作系统具有五大功能：</p>
<ul>
<li>
<p>处理机管理</p>
<p>作业和进程调度、进程控制、进程通信</p>
</li>
<li>
<p>存储器管理</p>
<p>内存分配、地址映射、内存保护、内存扩充</p>
</li>
<li>
<p>设备管理</p>
<p>缓冲区管理、设备分配、设备驱动、设备无关性</p>
</li>
<li>
<p>文件管理</p>
<p>文件存储空间的管理、文件操作的一般管理、目录管理、文件的读写管理和存取控制</p>
</li>
<li>
<p>用户接口</p>
<ul>
<li>
<p>程序接口</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;sys/types.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;sys/stat.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;fcntl.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#998;font-style:italic">//……
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>fd<span style="color:#000;font-weight:bold">=</span><span style="color:#900;font-weight:bold">open</span>(<span style="color:#d14">&#34;file.c&#34;</span>,<span style="color:#099">2</span>);
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>命令行接口</p>
<p>$ date</p>
</li>
<li>
<p>图形用户接口（GUI）</p>
<p><img src="./imgs/image-20231210140936771.png" alt="image-20231210140936771"></p>
</li>
</ul>
<p>UNIX 系统体系结构：</p>
 <img src="./imgs/image-20231210141253327.png" alt="image-20231210141253327" style="zoom:50%;" />
<p>在操作系统中，所有内核之外的程序都必须<code>经由系统调用</code>才能获得操作系统的服务。系统调用<code>只能在程序中使用</code>，不能直接作为命令在终端上输入和执行。由于系统调用能够改变处理机的执行状态，所以其<code>执行效率很高</code></p>
<p><img src="./imgs/image-20231210141744832.png" alt="image-20231210141744832"></p>
</li>
</ul>
<h2 id="13-操作系统的特征和服务">1.3 操作系统的特征和服务</h2>
<ul>
<li>
<p>操作系统的特征</p>
<ul>
<li>
<p>并发</p>
<p>两个或多个活动在<code>同一给定的时间间隔</code>中进行。</p>
</li>
<li>
<p>共享</p>
<p>计算机系统中的资源被<code>多个进程</code>所<code>共用</code>。</p>
</li>
<li>
<p>不确定性（异步性）</p>
<p>系统中各种事件发生顺序的<code>不可预测</code>性。另外，同一程序在相同的初始数据下，无论何时运行都应获得同样的结果。</p>
</li>
<li>
<p>抽象性</p>
<p>抽象是把<code>复杂事情简单化</code>的有效方式。</p>
</li>
</ul>
</li>
</ul>
<h3 id="并发性">并发性</h3>
<ul>
<li><code>并行</code>是指两个或多个事件在同一时刻发生。</li>
<li><code>并发</code>是指两个或多个事件在同一时间间隔内发生。</li>
<li>程序的并发执行，有效地<code>改善</code>了系统资源的利用率和提高了系统的吞吐量，但它使系统<code>复杂</code>化，操作系统必须具有控制和管理各种并发活动的能力。</li>
</ul>
<h3 id="共享性">共享性</h3>
<ul>
<li>操作系统与多个用户的程序<code>共同使用</code>计算机系统中的资源</li>
<li>资源<code>共享</code>是指系统中的硬件和软件资源不再为某个程序所独占，而是供多个用户共同使用</li>
<li>并发和共享是操作系统两个<code>最基本</code>的特征，这两者之间又是<code>互为存在条件</code>的</li>
<li>资源共享是以程序的并发为条件的，并发技术是以资源共享为基础的</li>
<li>若系统不能对资源共享实施<code>有效的管理</code>，也必将影响到程序的并发执行，甚至根本无法并发执行</li>
</ul>
<h3 id="异步性">异步性</h3>
<ul>
<li>在多道程序环境下，允许多个进程并发执行，但由于<code>竞争资源</code>等因素的限制，使进程的执行不是“气呵成”，而是以“<code>走走停停</code>”的方式运行。</li>
<li>多道程序环境下程序的执行，是以异步方式进行的；每个程序在何时执行，多个程序间的执行顺序以及完成每道程序<code>所需的时间</code>都是<code>不确定</code>和<code>不可预知</code>的。进程是以人们不可预知的速度向前推进，此即进程的异步性。</li>
</ul>
<h3 id="抽象性虚拟性">抽象性（虚拟性）</h3>
<p>在操作系统中，所谓虚拟，是指把一个物理上的实体，变为若干个逻辑上的对应物。物理实体(前者)是实的，而后者是虚的，相应地，用于实现虚拟的技术，称为虚拟技术。在 OS 中利用了多种虚拟技术，分别用来实现虚拟处理机、虚拟内存、虚拟外部设备和虚拟信道等。</p>
<h3 id="操作系统提供的服务和方式">操作系统提供的服务和方式</h3>
<ol>
<li>
<p>服务项目</p>
<p>程序执行、I/O 操作、文件系统管理、出错检测、通信、资源分配、统计、保护</p>
</li>
<li>
<p>服务方式</p>
<ol>
<li>
<p>系统调用</p>
<p>系统调用是操作系统提供的、与用户程序之间的接口，也就是操作系统提供给程序员的接口。它一般位于操作系统核心的最高层</p>
<p>从感觉上系统调用类似于过程调用，都由程序代码构成，使用方式相同——调用时传送参数</p>
<p>两者有实质差别：过程调用只能在用户态下运行，不能进入核心态；而系统调用可以实现从用户态到核心态的转变</p>
<p>系统调用可分为 5 个类别：进程控制、文件管理、设备管理、信息维护和通信。</p>
</li>
<li>
<p>系统程序</p>
<p>它们解决带<code>共性</code>的问题，并为程序的开发和执行提供更方便的环境</p>
<font style="border: 2px dashed #000000;padding:2px">
系统程序不是操作系统的组成部分，
最重要的系统程序就是命令解释程序
</font>
</li>
</ol>
</li>
</ol>
<h2 id="14-操作系统的形成和基本类型">1.4 操作系统的形成和基本类型</h2>
<h3 id="141-操作系统的形成和发展">1.4.1 操作系统的形成和发展</h3>
<ol>
<li>
<p>手工操作阶段</p>
</li>
<li>
<p>早期批处理阶段</p>
<ul>
<li>早期<strong>联机</strong>（<strong>单道</strong>）批处理</li>
<li>早期<strong>脱机</strong>批处理</li>
</ul>
</li>
<li>
<p>多道批处理系统</p>
</li>
</ol>
<p>早期联机批处理：</p>
<img src="./imgs/image-20231210145753384.png" alt="image-20231210145753384" style="zoom:67%;" />
<p>脱机输入/输出方式：</p>
<p>采用脱机输入输出方式时，程序和数据的输入输出都是在外围计算机的控制下完成的，即它们是脱离主机进行的，故称之为脱机输入输出操作。其主要优点如下：</p>
<p>1、减少了 CPU 的空闲时间</p>
<p>2、提高 I/O 速度</p>
<p>多道程序设计的基本概念</p>
<p>在计算机内存中同时存放若干道已开始运行尚未结束的程序，它们交替运行，共享系统中的各种硬、软件资源，从而使处理机得到充分利用。在该系统中，用户所提交的作业都先存放在外存上并排成一个队列，称为“后备队列”；然后，由作业调度程序按一定的算法从后备队列中选择若干个作业调入内存，使它们共享 CPU 和系统中的各种资源。</p>
<img src="./imgs/image-20231210150104782.png" alt="image-20231210150104782" style="zoom:67%;" />
<ul>
<li>
<p>系统吞吐量：</p>
<p>在一段给定的时间内，计算机所能完成的总工作量。</p>
</li>
<li>
<p>系统开销（system overhead）：</p>
<p>一般是指运行操作系统程序、对系统进行<strong>管理</strong>所花费的<strong>时间和空间</strong></p>
<p>由于多道程序运行时的<strong>物理实体</strong>及支持其运行的<strong>物理环境</strong>(如系统堆栈、地址映射寄存器、打开文件表 PSW、PC、通用寄存器等)涉及的内容较多，任务间的切换需要一定的时间才能完成，这是系统为实现并发而付出的额外代价，属于系统开销的一部分。</p>
</li>
</ul>
<h3 id="142-操作系统的基本类型">1.4.2 操作系统的基本类型</h3>
<p><font color="red">最基本类型：</font></p>
<ul>
<li>批处理系统</li>
<li>分时系统</li>
<li>实时系统</li>
</ul>
<p>以后又发展出：网络操作系统、分布式操作系统等</p>
<ol>
<li>
<p>批处理系统</p>
<ul>
<li>
<p><font size=5px>作业</font>是用户定义的、由计算机完成的工作单位包括一组计算机程序、文件和对操作系统的控制语句-&gt;<code>作业控制语言（JCL）</code></p>
</li>
<li>
<p><font size=5px>作业步</font>是由作业控制语句明确标识的计算机程序的执行过程</p>
</li>
<li>
<p>特点</p>
<ul>
<li>
<p>多道：系统在<strong>内存</strong>中存放多个作业，并且在<strong>外存</strong>上还保存大量的后备作业。</p>
</li>
<li>
<p>成批：系统<strong>按批次调度</strong>作业，而在系统运行过程中<strong>不允许</strong>用户和机器之间发生<strong>交互</strong>作用。</p>
<img src="./imgs/image-20231210152038315.png" alt="image-20231210152038315" style="zoom:67%;" />
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>分时系统</p>
<ul>
<li>
<p>分时系统的思想：</p>
<ul>
<li>采用<strong>时间片轮转</strong>的方法，同时为许多终端用户服务，对每个用户能保证足够快的响应时间，并提供交互会话的功能。</li>
<li><strong>时间片</strong>：将 CPU 的时间划分成若干个片段，称为时间片，操作系统以时间片为单位,轮流为每个终端用户服务</li>
<li>设计目标：对用户的请求及时响应，并在可能条件下尽量提高系统资源的利用率。</li>
<li>适合办公自动化、教学及事务处理等要求人机会话的场合。</li>
</ul>
</li>
<li>
<p>分时系统特点</p>
<ul>
<li>
<p>同时性</p>
<p>同时有多个用户使用一台计算机</p>
<p>宏观上：是多个人同时使用一个 CPU</p>
<p>微观上：多个人在不同时刻轮流使用 CPU</p>
</li>
<li>
<p>交互性</p>
<p>用户根据系统响应结果进一步提出新请求（用户直接干预每一步）</p>
</li>
<li>
<p>“独占”性</p>
<p>用户感觉不到计算机为其他人服务（OS 提供虚机器，各个用户的虚机器互不干扰）</p>
</li>
<li>
<p>及时性</p>
<p>系统对用户提出的请求及时响应</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>实时系统</p>
<ul>
<li>“实时”，是表示“<strong>及时</strong>”，而实时系统(Real-TimeSystem)是指系统能及时响应外部事件的请求，在<strong>规定的时间</strong>内完成对该事件的处理，并控制所有实时任务协调一致地运行</li>
<li>特点：<strong>及时性</strong>要求高，系统<strong>可靠性</strong>高。实时系统必须和<strong>先进的技术装备</strong>相结合</li>
</ul>
</li>
</ol>
<p>几种操作系统的比较：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">多道批处理系统</th>
<th style="text-align:center">分时系统</th>
<th style="text-align:center">实时系统</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CPU 时间分配</td>
<td style="text-align:center">作业运行时独占时间段</td>
<td style="text-align:center">分时</td>
<td style="text-align:center">事件发生时立即分配</td>
</tr>
<tr>
<td style="text-align:center">内存</td>
<td style="text-align:center">同时存放多批作业</td>
<td style="text-align:center">同时存放多作业与程序</td>
<td style="text-align:center">存放预置的事件处理程序</td>
</tr>
<tr>
<td style="text-align:center">响应时间</td>
<td style="text-align:center">运行期间不响应</td>
<td style="text-align:center">及时响应</td>
<td style="text-align:center">立即响应</td>
</tr>
<tr>
<td style="text-align:center">特殊要求</td>
<td style="text-align:center">极大的资源利用率</td>
<td style="text-align:center">公平面向多用户</td>
<td style="text-align:center">高可靠性</td>
</tr>
<tr>
<td style="text-align:center">面向用户群</td>
<td style="text-align:center">委托用户</td>
<td style="text-align:center">普通用户</td>
<td style="text-align:center">定向用户</td>
</tr>
</tbody>
</table>
<h2 id="15-系统初始一般过程">1.5 系统初始一般过程</h2>
<p>计算机开机后即开始初启过程。初启的目的是将操作系统的副本读入内存，建立正常的运行环境。多数系统的初启过程都由以下四步组成：</p>
<ul>
<li><strong>硬件检测</strong>：开机后 CPU 开始执行 ROM-BIOS 起始位置的代码，对系统中的硬件进行诊断检测，确定其存在并状态正常</li>
<li><strong>加载引导程序</strong>：自检完成后，读入硬盘第一个扇区的主引导记录，将系统控制权交给引导装入程序。</li>
<li><strong>初始化内核</strong>：主引导记录中的辅助程序为内核映像的执行做好准备后，就开始了内核本身的执行，完成系统的初始化过程(CPU、内存、外设等)。</li>
<li><strong>用户登录</strong>：初始化程序创建一个进程，以支持用户登录</li>
</ul>
<h2 id="第二章-进程和线程">第二章 进程和线程</h2>
<h2 id="21-进程概念">2.1 进程概念</h2>
<blockquote>
<p>现代操作系统的重要特性是程序的并发性和资源的共享性。这二者是相互联系和相互依赖的。为了满足多用户并发计算的要求，现代操作系统是围绕进程这个概念设计和构造的。</p>
<p>资源分配、独立运行的基本单位是进程</p>
<p>操作系统所具有的所有特征也是基于进程而形成的，应从进程的角度来研究操作系统</p>
</blockquote>
<h3 id="211-多道程序设计">2.1.1 多道程序设计</h3>
<ol>
<li>
<p>顺序程序活动的特点</p>
<ul>
<li>
<p><strong>顺序性</strong>，程序所规定的每个动作都在上个动作结束后才开始。</p>
</li>
<li>
<p><strong>封闭性</strong>，只有程序本身的动作才能改变程序的运行环境。</p>
</li>
<li>
<p><strong>可再现性</strong>，程序的执行结果与程序运行的速度无关。</p>
<img src="./imgs/image-20231213215528015.png" alt="image-20231213215528015" style="zoom:67%;" />
</li>
</ul>
</li>
<li>
<p>多道程序设计</p>
<p>现代计算机可以同时做几件事情，即同时运行几个程序：当它运行一个用户程序时，可以从磁盘或磁带上读数据，还可以向用户的终端或打印机上输出数据。使得多个设备并行操作。在多道程序系统中 CPU 不断地在多道程序之间转接多个程序是交叉执行的。</p>
<p>多道技术下作业执行过程：</p>
<img src="./imgs/image-20231213215835019.png" alt="image-20231213215835019" style="zoom:67%;" />
</li>
</ol>
<p>并发程序运行图：</p>
 <img src="./imgs/image-20231213215932564.png" alt="image-20231213215932564" style="zoom:67%;" />
<ol start="3">
<li>
<p>程序并发执行的特征</p>
<ul>
<li>
<p>失去封闭性。</p>
<p>系统资源不再由一个程序决定，受到并发程序的共同影响。</p>
</li>
<li>
<p>程序与计算不再一一对应</p>
<p>一个共享程序可被多个用户作业调用，从而形成多个“计算”。</p>
</li>
<li>
<p>并发程序在执行期间相互制约。</p>
<p>逻辑上彼此独立的程序由于公用独占资源会形成相互制约关系</p>
</li>
</ul>
</li>
</ol>
<h3 id="212-进程概念">2.1.2 进程概念</h3>
<ol>
<li>
<p>进程概念的引入</p>
<p>用程序这个静态概念已经不能如实反映程序并发执行过程中的这些特征。为此，人们引入“进程（Process）”这一概念来描述程序动态执行过程的本质。</p>
</li>
<li>
<p>进程概念</p>
<p><font color="red">进程最根本的属性是动态性和并发性。</font></p>
<p>在广义上将进程定义为：<strong>一个具有独立功能的程序关于某个数据集合的一次运行活动</strong>。</p>
<blockquote>
<p>进程是程序在并发环境中的执行过程。</p>
</blockquote>
<ul>
<li>
<p>动态性</p>
<p>程序是静态、被动的概念，本身可以作为一种软件资源长期保存；而进程是程序的一次执行过程，是动态、主动的概念，有一定的生命期，会动态的产生和消亡。</p>
</li>
<li>
<p>并发性</p>
<p>传统的进程是一个独立运行的单位，能与其他进程并发执行。进程是作为资源申请和调度单位存在的；通常的程序是不能作为一个独立运行的单位而并发执行的。</p>
</li>
<li>
<p>非对应性</p>
<p>程序和进程无一一对应关系。一个程序可被多个进程共用；一个进程在其活动中又可顺序地执行若干程序。</p>
</li>
<li>
<p>异步性</p>
<p>各个进程在并发执行过程中会产生相互制约关系，造成各自前进速度的不可预测性。而程序本身是静态的，不存在这种异步特征。</p>
</li>
</ul>
<p>进程和程序的区别：</p>
<table>
<thead>
<tr>
<th style="text-align:center">进程</th>
<th style="text-align:center">程序</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">进程是动态概念</td>
<td style="text-align:center">程序是静态概念</td>
</tr>
<tr>
<td style="text-align:center">进程具有并发性，宏观上同时运行</td>
<td style="text-align:center">程序本身具有顺序性，程序的并发执行是通过进程实现的</td>
</tr>
<tr>
<td style="text-align:center">进程具有独立性，是一个能独立运行的单位，是系统资源分配的基本单位，是运行调度的基本单位</td>
<td style="text-align:center">程序本身没有此特性</td>
</tr>
<tr>
<td style="text-align:center">程序和进程无一一对应关系，一个进程可顺序执行多个程序</td>
<td style="text-align:center">一个程序可由多个进程共用</td>
</tr>
<tr>
<td style="text-align:center">进程异步前进，会相互制约</td>
<td style="text-align:center">程序不具备此特性</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>进程的基本特征</p>
<ul>
<li>
<p>动态性</p>
<p>进程是程序的执行过程，有生有亡，有活动有停顿，可以处于不同的状态。</p>
</li>
<li>
<p>并发性</p>
<p>多个进程的实体能够存在于同一内存中，在一段时间内斗得到运行。这样，使得一个进程的程序与其他进程的程序并发执行。</p>
<blockquote>
<p>:: 这里的并发性是只外部并发性，单个进程内部的指令具有顺序性，按照顺序执行。</p>
</blockquote>
</li>
<li>
<p>调度性</p>
<p>进程是系统中申请资源的单位，也是被调度的单位。操作系统中有很多调度程序，它们根据各自的策略调度合适的进程，为其运行提供条件。</p>
</li>
<li>
<p>异步性</p>
<p>各进程向前推进的速度是不可预知的，即异步方式运行。这造成进程间的相互制约，使程序执行失去再现性。为保证各程序的协调运行，需要采取必要的措施。</p>
</li>
<li>
<p>结构性</p>
<p>进程有一定的结构，它由程序段、数据段和控制结构（<strong>进程控制块</strong>）等组成。</p>
</li>
</ul>
<pre tabindex="0"><code>引入进程的利、弊：
利：
改善系统资源利用率、提高吞吐量
弊：
空间开销：每个进程创建PCB
时间开销：协调调度、保护现场、CPU额外开销大。
</code></pre></li>
</ol>
<h2 id="22-进程的状态和组成">2.2 进程的状态和组成</h2>
<h3 id="221-进程的状态及其转换">2.2.1 进程的状态及其转换</h3>
<ol>
<li>进程的基本状态</li>
</ol>
<ul>
<li>
<p>运行状态</p>
<p>运行态 (running)：<code>正在CPU上执行</code>进程所处状态为运行状态。在单 CPU 系统中，任何时候<code>最多只能有一个</code>处于运行状态</p>
</li>
<li>
<p>就绪状态</p>
<p>就绪态(ready)：已经获得了<code>除CPU之外</code>的全部资源，等待系统分配 CPU，一旦获得 CPU,进程就可以变为运行态。</p>
</li>
<li>
<p>阻塞状态</p>
<p>阻塞态(blocked)又称<code>等待态</code>、<code>睡眠态</code>当一个进程<code>因等待某个条件发生</code>而不能运行时处于阻塞态。处于阻塞态的进程在逻辑上是不能运行的，即使 CPU 空闲，它也<code>不能占用CPU</code>。</p>
<p>三个状态的转换图：</p>
<img src="./imgs/image-20231214113042505.png" alt="image-20231214113042505" style="zoom: 50%;" />
<p>图中可以看出以下几点：</p>
<p>① 处于就绪态的某进程被进程调度程序的执行选中时，被选中进程<code>由就绪态变为运行态</code></p>
<p>② 进程由运行态变为阻塞态是由运行进程自己主动改变的。例如，一个正在运行的进程启动了某一外围设备后，等待该外围设备传输完成时，使自己由运行态变为阻塞态。</p>
<p>③ 进程<code>由阻塞态变为就绪态</code>总是由外界事件引起的。例如，上面所述的外围设备传输完成时，请求中断，由 I/0 中断处理程序把因等待这一 I/0 完成而阻塞的进程变为就绪态。</p>
<p>④ 处于运行态的进程被剥夺 CPU 时，它将由运行态变为就绪态。这通常与 CPU 的调度策略有关，如采用时间片轮转法调度时，当前运行进程用完分给它的时间片后，将由运行态变为就绪态；或采用优先级调度时，若有更高优先级的进程变为就绪态，当前进程被迫放弃 CPU，使自己由运行态变为就绪态，之后转进程调度。</p>
</li>
</ul>
<p>上述三种状态是进程<strong>最基本</strong>的状态，在实际操作系统实现中，远不止这三种状态。进程从无到有是由创建而产生，故它的起点应为<strong>建立</strong>状态，当进程运行完后要消亡，此时的状态为<strong>终止</strong>状态。</p>
<p>进程的五种状态及其转换：</p>
 <img src="./imgs/image-20231214113837330.png" alt="image-20231214113837330" style="zoom:50%;" />
<p>进程的挂起状态：</p>
<p>使处于基本状态的进程（就绪、执行、阻塞）处于<strong>静止</strong>(<strong>非终止</strong>)状态，此时系统回收被这些进程占用的内存资源，将其实体复制到外存的进程交换区。挂起<strong>不等于撤销</strong>，可通过解挂重新分配内存。（有些系统为了管理上的方便，设置了这一状态）</p>
<h3 id="222-进程描述">2.2.2 进程描述</h3>
<ol>
<li>
<p>进程映像</p>
<p>进程映像通常由程序、数据集合、栈和 PCB 4 部分组成。</p>
<p>进程映像模型：</p>
<p><img src="./imgs/image-20231214120858810.png" alt="image-20231214120858810"></p>
</li>
<li>
<p>进程控制块的组成</p>
<p><strong>进程控制块</strong>（PCB）也称进程描述块（Process Descriptor），它是进程组成中最关键的部分，其中含有进程的描述信息和控制信息，使进程动态特性的集中反映，是系统对进程施行识别和控制的依据。</p>
<p>∆ 进程控制块一般包括：</p>
<ul>
<li>
<p>进程名。它是唯一的标志对应进程的一个标志符或数字。有的系统用进程标识符作为进程的外部标志，用进程标识号（PID，在一定数值范围内的进程编号）作为进程的内部标志。</p>
</li>
<li>
<p>特征信息。包括是系统进程还是用户进程，进程实体是否常驻内存等信息。</p>
</li>
<li>
<p>进程状态信息。表明该进程的执行状态，是运行状态、就绪状态还是阻塞状态。</p>
</li>
<li>
<p>调度优先权。表示进程获取 CPU 的优先级别。当多个就绪进程竞争 CPU 时，系统一般让优先权高的进程先占用 CPU。</p>
</li>
<li>
<p>通信信息。反映该进程与哪些进程有什么样的通信关系，如等待哪个进程的信号等。</p>
</li>
<li>
<p>现场保护区。当对应进程由于某种原因放弃使用 CPU 时，需要把它的一部分与运行环境有关的信息保存起来，以便在重新获得 CPU 后恢复正常运行。通常被保护的信息有程序计数器、程序状态字、各工作寄存器的内容等。</p>
</li>
<li>
<p>资源需求、分配和控制方面的信息，如进程所需要或占有的 I/O 设备、磁盘空间、数据区等。</p>
</li>
<li>
<p>进程实体信息。指出该进程的程序和数据的存储情况，在内存或外存的地址、大小等。</p>
</li>
<li>
<p>族系关系。反映父子进程的隶属关系。</p>
</li>
<li>
<p>其他信息。如文件信息、工作单元等。</p>
</li>
</ul>
</li>
<li>
<p>进程控制块的作用</p>
</li>
</ol>
<ul>
<li>每个进程有<strong>惟一</strong>的进程控制块</li>
<li>操作系统根据 PCB 对进程实施控制和管理</li>
<li>进程的动态、并发等特征是利用 PCB 表现出来的</li>
<li><strong>PCB 是进程存在的惟一标识</strong>。</li>
</ul>
<h3 id="223-进程队列">2.2.3 进程队列</h3>
<ol>
<li>
<p>线性方式</p>
<p>PCB 线性队列示意图：</p>
<img src="./imgs/image-20231214122435536.png" alt="image-20231214122435536" style="zoom:67%;" />
<p>这种方式的最大<strong>优点</strong>是<strong>简单</strong>，<strong>节省存贮空间</strong>其<strong>缺点</strong>是<strong>系统开销大</strong>。查找一个指定的 PCB 较费时间，平均要花费<strong>半个 PCB 表</strong>的时间。这是由于各种不同状态的 PCB 放在一起，使得找到某一指定状态的 PCB 经常要扫描整个线性队列。早期的 UNIX 系统就是采用这种形式的表。</p>
</li>
<li>
<p>链接方式</p>
<p>PCB 链接队列示意图：</p>
<img src="./imgs/image-20231214122758846.png" alt="image-20231214122758846" style="zoom:50%;" />
<img src="./imgs/image-20231214122943269.png" alt="image-20231214122943269" style="zoom:50%;" />
<p><strong>把处于同一状态的进程按照一定方式链接成一个队列</strong>。每一个队列有一个专用队列指针指出该队列中第一个进程 PCB 所在位置。</p>
</li>
<li>
<p>索引方式</p>
<img src="./imgs/image-20231214124001364.png" alt="image-20231214124001364" style="zoom: 67%;" />
<p>对于<strong>具有相同状态</strong>的进程，分别设置各自的<strong>PCB 索引表</strong>，表目为 PCB 在 PCB 表中的地址，就构成了就绪索引表和等待索引表。</p>
</li>
</ol>
<h2 id="23-进程管理">2.3 进程管理</h2>
<blockquote>
<p>原语：系统使用一些具有特定功能的程序段来创建、撤消进程以及完成进程各状态间转换等一系列有效管理。（进程管理），这些程序段的执行过程是不允许被中断的，或者说其执行过程不可分割。我们把这样的程序段叫原语</p>
</blockquote>
<h3 id="231-进程图">2.3.1 进程图</h3>
<p>**进程图（Process Graph）**是描述进程族系关系的有向树。</p>
<p>**族系关系：**由父进程创建子进程，子进程创建下一个子进程，从而构成一棵树形进程族系图。</p>
<img src="./imgs/image-20231215172430439.png" alt="image-20231215172430439" style="zoom:67%;" />
<p>一棵树表示一个家族，根节点是祖先，一个子进程只有一个父进程，子进程可以继承父进程所拥有的资源，撤销父进程时<code>理论上</code>也必须同时撤销其所有子进程。</p>
<h3 id="232-进程创建">2.3.2 进程创建</h3>
<p>引发进程创建的事件：调度新作业、用户登录、操作系统提供特定服务、派生新进程</p>
<ul>
<li>
<p>创建新进程时要执行系统调用（如 UNIX/Linux 中的 fork）</p>
</li>
<li>
<p>主要过程：</p>
<ol>
<li>
<p><strong>申请</strong>一个空闲的 PCB</p>
</li>
<li>
<p>为新进程<strong>分配资源</strong></p>
</li>
<li>
<p>将新进程的 PCB<strong>初始化</strong></p>
</li>
<li>
<p>将新进程加到就绪队列中</p>
<img src="./imgs/image-20231215174149229.png" alt="image-20231215174149229" style="zoom:67%;" />
</li>
</ol>
</li>
</ul>
<p>UNIX 系统父进程创建子进程 C 程序示例：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C" data-lang="C"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;unistd.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;sys/types.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;stdio.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">int</span> argc,<span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>argv[])
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> pid;
</span></span><span style="display:flex;"><span>    pid <span style="color:#000;font-weight:bold">=</span> <span style="color:#900;font-weight:bold">fork</span>();<span style="color:#998;font-style:italic">//创建一个子进程
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">if</span>(pid<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">0</span>){<span style="color:#998;font-style:italic">//出错，进程ID号不可能小于0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#900;font-weight:bold">fprintf</span>(stderr, <span style="color:#d14">&#34;Fork Failed&#34;</span>);<span style="color:#998;font-style:italic">//输出出错消息——Fork Failed
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#900;font-weight:bold">exit</span>(<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span> (pid<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">execlp</span>(<span style="color:#d14">&#34;bin/ls&#34;</span>,<span style="color:#d14">&#34;ls&#34;</span>,<span style="color:#0086b3">NULL</span>);<span style="color:#998;font-style:italic">//执行/bin下面的ls命令
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">wait</span>(<span style="color:#0086b3">NULL</span>);<span style="color:#998;font-style:italic">//父进程等待子进程完成
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#900;font-weight:bold">printf</span>(<span style="color:#d14">&#34;Child Complete&#34;</span>);<span style="color:#998;font-style:italic">//输出完成信息
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#900;font-weight:bold">exit</span>(<span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="233-进程终止">2.3.3 进程终止</h3>
<ul>
<li>
<p>进程终止的原因：</p>
<ul>
<li>正常终止</li>
<li>异常终止</li>
<li>外部干扰</li>
</ul>
</li>
<li>
<p>终止进程的主要操作：</p>
<ul>
<li><strong>找到</strong>指定进程的<strong>PCB</strong>，终止该进程的运行</li>
<li><strong>回收</strong>该进程所占用的全部<strong>资源</strong></li>
<li>终止其所有<strong>子孙进程</strong>，回收它们所占用的全资源。</li>
<li>将被终止进程的<strong>PCB</strong>从原来队列中<strong>摘走</strong></li>
</ul>
</li>
</ul>
<h3 id="234-进程阻塞">2.3.4 进程阻塞</h3>
<p>过程：</p>
<ol>
<li>立即停止当前进程的执行。</li>
<li>将现进程的 CPU 现场送到 PCB 现场保护区中保存起来</li>
<li>把该进程 PCB 中的现行状态由“运行”改为“阻塞”，把该进程插到具有相同事件的阻塞队列中。</li>
<li>转到程序调度程序，重新从就绪队列中挑选一个合适进程投入运行。</li>
</ol>
<h3 id="235-进程唤醒">2.3.5 进程唤醒</h3>
<p>唤醒原语执行过程：</p>
<ol>
<li>把阻塞进程从相应的阻塞队列中摘下。</li>
<li>将现行状态改为就绪状态，然后把该进程插入就绪队列中。</li>
<li>如果被唤醒的进程比当前运行进程的优先级更高，则设置重新调度标志。</li>
</ol>
<h2 id="第六章-文件系统">第六章 文件系统</h2>
<h2 id="操作系统往年试卷">操作系统往年试卷</h2>
<h3 id="一单项选择题">一、单项选择题</h3>
<p>1、下列关于多道程序系统的叙述中，不正确的是_________。</p>
<p>A) 支持进程的并发执行 				B) 进程数越多 CPU 利用率越高</p>
<p>C) 不一定支持虚拟存储管理 			D) 需要实现对共享资源的管理</p>
<blockquote>
<p>道程序系统可以同时运行多个进程，使它们在系统中并发执行。通过调度算法，系统可以在不同进程之间进行快速切换，实现并发执行。故A正确</p>
<p>在计算机的早期，多道程序系统中CPU一次读取多个程序放入内存，不必支持虚拟存储管理。故C正确</p>
<p>在多道程序系统中，多个进程可能同时访问和使用共享资源，如内存、文件系统、设备等。为了避免冲突和资源竞争，操作系统需要实现对共享资源的管理，例如使用锁机制或信号量等机制来协调进程对共享资源的访问。故D正确</p>
<p>进程数越多，由于竞争CPU的资源，实际上可能降低CPU利用率。故B不正确</p>
</blockquote>
<p>2、下列算法中可用于磁盘调度的是________。</p>
<p>A) OPT 算法 						B) LOOK 算法</p>
<p>C) LRU 算法 						D) HRRF 算法</p>
<blockquote>
<p>磁盘调度算法：</p>
<p>（1）先来服务法（FCFS）</p>
<p>（2）最短寻道时间优先法（SSTF）</p>
<p>（3）扫描法（SCAN）</p>
<p>（4）巡回扫描法（C-SCAN）</p>
<p>（5）电梯算法，又称寻查法（LOOK）</p>
</blockquote>
<p>3、下列选项中，只在核心态 下执行的指令是________。</p>
<p>A) 改变指令地址寄存器的内容 B) 读时钟日期 C) 设置时钟日期 D) 除法指令</p>
<blockquote>
<p>只能在核心态下执行的指令：</p>
<p>① 屏蔽所有终端</p>
<p>② 设置时钟日期</p>
<p>③ 启动打印机</p>
<p>⑥ 清内存</p>
</blockquote>
<p>4、某进程访问的页面 b 不在内存中，导致产生缺页异常，该缺页异常处理过程中不一定包含的操作是 _________。</p>
<p>A) 淘汰内存中的页 B) 修改页表中页面 b 对应的存在位 C) 建立页号与页框号的对应关系 D) 将页面 b 从外存读入内存</p>
<blockquote>
<p><img src="./imgs/image-20240105132346351.png" alt="image-20240105132346351"></p>
<p>由图片分析应该选择A</p>
<p>缺页异常处理过程是指在访问某个页时，发现该页不在内存中而需要从外存中调入的情况。</p>
<p>A正确。淘汰内存中的页并不是缺页异常处理的必要步骤。淘汰页是在内存空间不足时，为了给新的页腾出空间而选择淘汰一些旧的页。在处理缺页异常时，并不一定需要进行淘汰操作。</p>
<p>B错误。在处理缺页异常时，需要建立页号与页框号之间的对应关系，以便将对应的页调入内存或者进行其他操作。这是确保后续内存访问可以正确映射的步骤，是缺页异常处理过程中一定包含的操作。</p>
<p>C错误。当发生缺页异常时，需要将缺失的页从外存读入到内存中，以满足进程的访问需求。是缺页异常处理过程中一定包含的操作。</p>
<p>D错误。在页表中，通常会使用一位存在位来表示该页是否在内存中，当发生缺页异常处理完成时，需要修改页表中相应页的存在位，将其置为1，表示该页已经调入内存。</p>
</blockquote>
<p>5、进程调度又称为低级调度，其主要功能是______。</p>
<p>A) 选择一个作业调入内存 B) 选择一个外存中的进程调入主存  C) 选择一个主存中的进程换出到外存 D) 将一个就绪态的进程投入运行</p>
<blockquote>
<p>进程调度完成进程从就绪态到运行状态的转化。故选D</p>
</blockquote>
<p>6、下列关于 CPU 模式的叙述中，正确的是_______。</p>
<p>A) CPU 处于用户态时只能执行特权指令 B) CPU 处于核心态时只能执行特权指令 C) CPU 处于用户态时只能执行非特权指令 D) CPU 处于核心态时只能执行非特权指令</p>
<blockquote>
<p>核心态可以执行所有指令，特权指令只能在核心态被执行，而用户态只能执行非特权指令。</p>
</blockquote>
<p>7、下列事件或操作中，可能导致进程 P 由执行态变为阻塞态的是________。</p>
<p>①进程 P 运行结束 ②进程 P 执行信号量的 wait()操作  ③进程 P 的时间片用完 ④进程 P 申请外设</p>
<p>A) ③④ 	B) ②④ 	C) ①④ 	D) ①②③</p>
<blockquote>
<p>①错误。正常运行结束不会阻塞。</p>
<p>②正确。进程P执行信号量的wait()操作，说明进程P不具有执行所需的所有系统资源，如果信号量条件不满足，进入阻塞态。</p>
<p>③错误。进程P的时间片用完，说明进程P不占用CPU，进入就绪态。</p>
<p>④正确。进程P申请外设，说明进程P不具有执行所需的所有系统资源，进入阻塞态。</p>
<p>所以②④正确，选B</p>
</blockquote>
<p>8、顺序访问磁盘上的物理记录时，效率最高的是______文件。</p>
<p>A) 连续结构 B) 多重索引结构 C) 链式结构 D) 混合索引结构</p>
<blockquote>
</blockquote>
<p>9、下列设备中，属于共享设备的是_________。</p>
<p>A) 语音输入输出设备 B) 鼠标 C) 打印机 D) 磁盘</p>
<blockquote>
<p>独占设备：只能一个进程独占的设备，如行式打印机、读卡机磁带机之类的设备</p>
<p>共享设备：高速、大容量、可直接存取，可由若干进程同时共用的设备，如磁盘。</p>
<p>虚拟设备：用某种技术把独占设备改造成共享设备，不是物理上共享，只是感觉。这类设备属于可共享设备。</p>
</blockquote>
<p>10、文件系统根目录的建立是在______操作中完成的。</p>
<p>A) 操作系统的安装 B) 磁盘的物理格式化 C) 磁盘的逻辑格式化 D) 对磁盘进行分区</p>
<h3 id="二判断题">二、判断题</h3>
<p>1、计算机系统中引入缓冲技术的目的是为了节省内存。（）</p>
<blockquote>
<p>目的：</p>
<p>（1）缓和CPU与I/O设备间速度不匹配的矛盾。</p>
<p>（2）减少对CPU的中断频率，放宽对CPU中断响应时间的限制。</p>
<p>（3）解决数据粒度不匹配的问题。</p>
<p>（4）提高CPU和I/O设备之间的并行性。</p>
</blockquote>
<p>2、处于阻塞态的进程被唤醒后，可直接变为运行状态。（）</p>
<blockquote>
<p>阻塞态变为就绪态，插入就绪队列</p>
</blockquote>
<p>3、采用段页式技术管理的系统中产生的内存碎片属于内部碎片。（ ）</p>
<p>4、并发是指两个或多个活动在同一给定的时间间隔中进行。（ ）</p>
<blockquote>
<p>正确，注意区分并行：两个或多个事件在同一时刻发生</p>
</blockquote>
<p>5、SPOOLing 系统的主要功能是从逻辑上扩充了内存的容量。（ ）</p>
<blockquote>
<p>SPOOLing主要实现了假脱机技术，缓解了CPU与慢速I/O设备的矛盾</p>
</blockquote>
<h3 id="三简答题">三、简答题</h3>
<p>1、简要说明操作系统的主要功能是什么？操作系统最基本的特征有哪些？</p>
<p>答：主要功能：</p>
<ul>
<li>
<p>处理机管理</p>
<p>作业和进程调度、进程控制、进程通信</p>
</li>
<li>
<p>存储器管理</p>
<p>内存分配、地址映射、内存保护、内存扩充</p>
</li>
<li>
<p>设备管理</p>
<p>缓冲区管理、设备分配、设备驱动、设备无关性</p>
</li>
<li>
<p>文件管理</p>
<p>文件存储空间的管理、文件操作的一般管理、目录管理、文件的读写管理和存取控制</p>
</li>
<li>
<p>用户接口</p>
<ul>
<li>程序接口</li>
<li>命令行接口</li>
<li>图形接口</li>
</ul>
</li>
</ul>
<p>基本特征：</p>
<ul>
<li>
<p>并发</p>
<p>两个或多个活动在<code>同一给定的时间间隔</code>中进行。</p>
</li>
<li>
<p>共享</p>
<p>计算机系统中的资源被<code>多个进程</code>所<code>共用</code>。</p>
</li>
<li>
<p>不确定性（异步性）</p>
<p>系统中各种事件发生顺序的<code>不可预测</code>性。另外，同一程序在相同的初始数据下，无论何时运行都应获得同样的结果。</p>
</li>
<li>
<p>抽象性</p>
<p>抽象是把<code>复杂事情简单化</code>的有效方式。</p>
</li>
</ul>
<p>2、什么是设备独立性(或设备无关性)？它有什么好处？UNIX 系统中如何实现设备独立性？</p>
<p>答：设备独立性是指应用程序中使用的设备，不局限于某个具体的物理设备。</p>
<p>好处：用户程序运行不需要依赖特定的设备完好、是否空闲，可以由系统合理分配，不论使用哪一台同类设备，程序都能正确运行。</p>
<p>UNIX系统中：</p>
<h3 id="四综合题">四、综合题</h3>
<p>1、进程 P1 使用两个互斥缓冲区 A 和 B 向进程 P2、P3 发送消息，每次发送均向两个缓冲区内 写入同样的消息，进程 P2 从缓冲区 A 读取消息，进程 P3 从缓冲区 B 读取消息。只有当 P2、P3 进程都读取这条消息后 P1 才可再向两个缓冲区中分别发送新的消息。试用信号量及其 P、V 操作 描述 3 个进程的并发活动。</p>
<p>⑴给出各信号量的含义及初值；(4 分)</p>
<p>⑵写出上述活动的伪码程序。(10 分)</p>
<p>（1）答：emptyA、emptyB分别表示缓冲区A、B为空，初值为1表示为空，fullA、fullB分别表示缓冲区A、B有消息，初值为0，表示没有消息。</p>
<p>（2）答：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>process p1{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span>(true):
</span></span><span style="display:flex;"><span>    p(emptyA)
</span></span><span style="display:flex;"><span>  	p(emptyB)
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">#向A、B缓冲区发送消息</span>
</span></span><span style="display:flex;"><span>    V(fullA)
</span></span><span style="display:flex;"><span>    v(fullB)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>process p2{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span>(true):
</span></span><span style="display:flex;"><span>    p(fullA)
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">#从缓冲区A读取消息</span>
</span></span><span style="display:flex;"><span>    v(emptyA)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>process p3{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span>(true)
</span></span><span style="display:flex;"><span>    p(fullB)
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">#从缓冲区B读取消息</span>
</span></span><span style="display:flex;"><span>    v(emptyB)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>2、某系统采用二级反馈队列调度算法进行调度。就绪队列 Q1 采用时间片轮转 调度算法，时间 片为 8ms；就绪队列 Q2 采用短进程优先 调度算法。系统优先调度 Q1 队列中的进程，当 Q1 为空时 系统才会调度 Q2 中的进程。新创建的进程首先进入 Q1，Q1 中的进程执行一个时间片后，若未结 束，则转入 Q2。若当前 Q1、Q2 为空，系统依次创建进程 P1、P2 后即开始进程调度，P1、P2 需 要的 CPU 时间分别为 20ms 和 10ms。</p>
<p>⑴计算并填充下表；</p>
<p>⑵若系统从 0ms 时刻开始调度，到两个进程都运行结束为止，发生进程调度的总次数是多少？分别发生在哪些时刻？针对哪个进程？</p>
<table>
<thead>
<tr>
<th style="text-align:center">进程</th>
<th style="text-align:center">进入就绪队列时刻</th>
<th style="text-align:center">CPU执行时间</th>
<th style="text-align:center">开始时间</th>
<th style="text-align:center">完成时间</th>
<th style="text-align:center">周转时间（T）</th>
<th>带权周转时间（W）</th>
<th style="text-align:center">在系统中的等待时间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">P1</td>
<td style="text-align:center">0ms</td>
<td style="text-align:center">20ms</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">P2</td>
<td style="text-align:center">0ms</td>
<td style="text-align:center">10ms</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>

    </div>
    
    

    

</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=">
            

        </a>

        <a href="//tryanel.github.io/days/" target="_blank">
            
            明天，我们会更好
            
        </a>
    </div>

    <div class="info">
        <a href="https://github.com/Tryanel/Tryanel.github.io">Copyright</a> © 2023 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style=""></div>
    </body>
</html>
